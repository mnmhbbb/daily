2022.08.31.Wed.

Next.js `router.replace`

상황:

- 설문을 끝낸 후 결과 페이지로 이동하였다.
- 메인 > 질문 > 브릿지 > 결과 순으로 페이지가 변경된 상황
- 이때 뒤로가기를 하면 실제 이전 페이지(bridge)로 넘어가버리는 문제를 해결하고자 함.
- 현재는 질문 페이지와 브릿지 페이지에서 결과 페이지로 `router.push()`로 라우팅 시키고 있음.

해결:

- nextjs에서 제공하는 router 속성을 활용함
- 질문&브릿지 페이지에서 push가 아닌 `router.replace()`를 사용하여 결과페이지로 라우팅 시켰다.
- 메인 > 질문 > 브릿지 > 결과
- 이때 질문&브릿지에서 push로 라우팅시키면 페이지 히스토리 스택이 순서대로 쌓여서 자연스럽게 브릿지 페이지로 뒤로가기 됨
- 이때 질문&브릿지에서 replace로 라우팅시키면 스택의 가장 위에 있는 페이지를 현재 replace()에 넘기는 페이지로 변경함
- 메인 > 결과
- 따라서 결과 페이지에서 뒤로가기 했을 때 메인 페이지로 이동할 수 있게 됨
- 즉, 페이지를 이동한다기 보다는 현재 페이지를 바꿔주는 개념
- https://nextjs.org/docs/api-reference/next/router#routerreplace
